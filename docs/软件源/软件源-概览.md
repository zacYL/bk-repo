### 概览（opdata）

#### 1.总包数

* API: GET /api/op/packages?projectId=bksoftware

* 请求体

  此接口请求体为空

* 请求字段说明

  | 字段      | 类型   | 默认值 | 是否必传 | 说明                             | Description |
    | --------- | ------ | ------ | -------- | -------------------------------- | ----------- |
  | projectId | String | 无     | 是       | 项目名(软件源固定为: bksoftware) | project id  |

* 响应体

  ```json
  {
      "code": 0,
      "message": null,
      "data": 1,
      "traceId": ""
  }
  ```

#### 2.仓库数

* API: GET /api/op/repos?projectId=bksoftware

* 请求体

  此接口请求体为空

* 请求字段说明

  | 字段      | 类型   | 默认值 | 是否必传 | 说明                             | Description |
    | --------- | ------ | ------ | -------- | -------------------------------- | ----------- |
  | projectId | String | 无     | 是       | 项目名(软件源固定为: bksoftware) | project id  |

* 响应体

  ```json
  {
      "code": 0,
      "message": null,
      "data": 1,
      "traceId": ""
  }
  ```

#### 3.存储大小

* API: GET /api/op/capacity?projectId=bksoftware

* 请求体

  此接口请求体为空

* 请求字段说明

  | 字段      | 类型   | 默认值 | 是否必传 | 说明                             | Description |
    | --------- | ------ | ------ | -------- | -------------------------------- | ----------- |
  | projectId | String | 无     | 是       | 项目名(软件源固定为: bksoftware) | project id  |

* 响应体

  ```json
  {
      "code": 0,
      "message": null,
      "data": 0,
      "traceId": ""
  }
  ```

#### 4.上传数

* API: GET /api/op/package/uploads?projectId=bksoftware

* 请求体

  此接口请求体为空

* 请求字段说明

  | 字段      | 类型   | 默认值 | 是否必传 | 说明                             | Description |
    | --------- | ------ | ------ | -------- | -------------------------------- | ----------- |
  | projectId | String | 无     | 是       | 项目名(软件源固定为: bksoftware) | project id  |

* 响应体

  ```json
  {
      "code": 0,
      "message": null,
      "data": {
          "sum": 0,
          "latestWeek": 0
      },
      "traceId": ""
  }
  ```

* data字段说明

  | 字段       | 类型 | 说明           | Description         |
    | ---------- | ---- | -------------- | ------------------- |
  | sum        | Long | 总上传数       | Uploads             |
  | latestWeek | Long | 最近一周上传数 | Latest week uploads |

#### 5.下载数

* API: GET /api/op/package/downloads?projectId=bksoftware

* 请求体

  此接口请求体为空

* 请求字段说明

  | 字段      | 类型   | 默认值 | 是否必传 | 说明                             | Description |
    | --------- | ------ | ------ | -------- | -------------------------------- | ----------- |
  | projectId | String | 无     | 是       | 项目名(软件源固定为: bksoftware) | project id  |

* 响应体

  ```json
  {
      "code": 0,
      "message": null,
      "data": {
          "sum": 0,
          "latestWeek": 0
      },
      "traceId": ""
  }
  ```

* data字段说明

  | 字段       | 类型 | 说明           | Description           |
    | ---------- | ---- | -------------- | --------------------- |
  | sum        | Long | 总下载数       | Downloads             |
  | latestWeek | Long | 最近一周下载数 | Latest week downloads |

#### 6.仓库类型占比

* API: GET /api/op/repotype?projectId=bksoftware

* 请求体

  此接口请求体为空

* 请求字段说明

  | 字段      | 类型   | 默认值 | 是否必传 | 说明                             | Description |
    | --------- | ------ | ------ | -------- | -------------------------------- | ----------- |
  | projectId | String | 无     | 是       | 项目名(软件源固定为: bksoftware) | project id  |

* 响应体

  ```json
  {
      "code": 0,
      "message": null,
      "data": {
          "repoTypeMetrics": [
              {
                  "type": "DOCKER",
                  "count": 1,
                  "percent": "50.00%"
              },
              {
                  "type": "MAVEN",
                  "count": 1,
                  "percent": "50.00%"
              }
          ]
      },
      "traceId": ""
  }
  ```

* data字段说明

  | 字段    | 类型   | 说明       | Description  |
    | ------- | ------ | ---------- | ------------ |
  | type    | String | 仓库类型   | repo type    |
  | count   | Int    | 仓库数量   | repo count   |
  | percent | String | 所占百分比 | repo percent |

#### 7.仓库容量列表

* API: GET /api/op/repo/capacity?projectId=bksoftware

* 请求体

  此接口请求体为空

* 请求字段说明

  | 字段      | 类型   | 默认值 | 是否必传 | 说明                             | Description |
    | --------- | ------ | ------ | -------- | -------------------------------- | ----------- |
  | projectId | String | 无     | 是       | 项目名(软件源固定为: bksoftware) | project id  |

* 响应体

  ```json
  {
      "code": 0,
      "message": null,
      "data": [
          {
              "projectId": "bksoftware",
              "repoName": "docker",
              "repoType": "DOCKER",
              "capacityLimit": 9223372036854775807,
              "usedCapacity": 0
          },
          {
              "projectId": "bksoftware",
              "repoName": "maven",
              "repoType": "MAVEN",
              "capacityLimit": 9223372036854775807,
              "usedCapacity": 547503
          }
      ],
      "traceId": ""
  }
  ```

* data字段说明

  | 字段          | 类型   | 说明                      | Description         |
    | ------------- | ------ | ------------------------- | ------------------- |
  | projectId     | String | 项目名                    | projectId           |
  | repoName      | String | 仓库名                    | repo name           |
  | repoType      | String | 仓库类型                  | repo type           |
  | capacityLimit | Long   | 仓库容量（单位：B）       | repo capacity limit |
  | usedCapacity  | Long   | 仓库已使用容量（单位：B） | repo used  capacity |

#### 8.仓库上传/下载列表

* API: GET /api/op/repo/visit?projectId=bksoftware

* 请求体

  此接口请求体为空

* 请求字段说明

  | 字段      | 类型   | 默认值 | 是否必传 | 说明                             | Description |
    | --------- | ------ | ------ | -------- | -------------------------------- | ----------- |
  | projectId | String | 无     | 是       | 项目名(软件源固定为: bksoftware) | project id  |

* 响应体

  ```json
  {
      "code": 0,
      "message": null,
      "data": [
          {
              "projectId": "bksoftware",
              "repoName": "docker",
              "repoType": "DOCKER",
              "downloads": 0,
              "uploads": 0
          },
          {
              "projectId": "bksoftware",
              "repoName": "maven",
              "repoType": "MAVEN",
              "downloads": 0,
              "uploads": 0
          }
      ],
      "traceId": ""
  }
  ```

* data字段说明

  | 字段      | 类型   | 说明     | Description    |
    | --------- | ------ | -------- | -------------- |
  | projectId | String | 项目名   | projectId      |
  | repoName  | String | 仓库名   | repo name      |
  | repoType  | String | 仓库类型 | repo type      |
  | downloads | Long   | 下载数   | repo downloads |
  | uploads   | Long   | 上传数   | repo uploads   |

#### 8.制品下载排行

* API: GET /api/op/package/download?projectId=bksoftware

* 请求体

  此接口请求体为空

* 请求字段说明

  | 字段      | 类型   | 默认值 | 是否必传 | 说明                             | Description |
    | --------- | ------ | ------ | -------- | -------------------------------- | ----------- |
  | projectId | String | 无     | 是       | 项目名(软件源固定为: bksoftware) | project id  |

* 响应体

  ```json
  {
      "code": 0,
      "message": null,
      "data": {
          "artifactDownloadMetrics": [
            {
              "name":"a.jar",
              "projectId":"bksoftware",
              "repoName":"maven",
              "repoType":"MAVEN",
              "packageName":"a",
              "packageVersion":"1.0.0",
              "count":1,
              "size":1,
              "packageKey":"gav://a/b/b.jar"
            }
          ]
      },
      "traceId": ""
  }
  ```

* data字段说明

  |      |      |      |      |
    | ---- | ---- | ---- | ---- |
  |      |      |      |      |

#### 9.查询每日下载量

* API: GET /api/op/day/downloads?projectId=bksoftware

* 请求体

  此接口请求体为空

* 请求字段说明

  | 字段      | 类型   | 默认值 | 是否必传 | 说明                             | Description |
    | --------- | ------ | ------ | -------- | -------------------------------- | ----------- |
  | projectId | String | 无     | 是       | 项目名(软件源固定为: bksoftware) | project id  |
  | days      | long   | 7      | 否       | 最近几天的数据，默认7天          | days        |

* 响应体

  ```json
  {
      "code": 0,
      "message": null,
      "data": {
        "downloadMetrics":[
          {
            "projcetId":"bksoftware",
            "repoName":"test",
            "time": "2021-07-09",
            "count": 1
          }
        ]
      },
      "traceId": ""
  }
  ```

* data字段说明

  | 字段      | 类型   | 说明   | Description |
    | --------- | ------ | ------ | ----------- |
  | projectId | String | 项目名 | projectId   |
  | repoName  | String | 仓库名 | repo name   |
  | time      | String | 日期   | time        |
  | count     | Long   | 下载数 | downloads   |

#### 10.查询每日上传量

* API: GET /api/op/day/uploads?projectId=bksoftware

* 请求体

  此接口请求体为空

* 请求字段说明

  | 字段      | 类型   | 默认值 | 是否必传 | 说明                             | Description |
    | --------- | ------ | ------ | -------- | -------------------------------- | ----------- |
  | projectId | String | 无     | 是       | 项目名(软件源固定为: bksoftware) | project id  |
  | days      | long   | 7      | 否       | 最近几天的数据，默认7天          | days        |

* 响应体

  ```json
  {
      "code": 0,
      "message": null,
      "data": {
        "downloadMetrics":[
          {
            "projcetId":"bksoftware",
            "repoName":"test",
            "time": "2021-07-09",
            "count": 1
          }
        ]
      },
      "traceId": ""
  }
  ```

* data字段说明

  | 字段      | 类型   | 说明   | Description |
    | --------- | ------ | ------ | ----------- |
  | projectId | String | 项目名 | projectId   |
  | repoName  | String | 仓库名 | repo name   |
  | time      | String | 日期   | time        |
  | count     | Long   | 下载数 | downloads   |

  

