# 恢复被删除的文件或目录
功能描述：恢复被删除的文件或目录

### 请求地址
```
/repo-repository/api/node/restore/{projectId}/{repoName}/{fullPath}
```

### 请求方法

`POST`

### 请求参数

#### 请求头参数

| 字段                  | 类型   | 必填 | 描述                  |
| --------------------- | ------ | ---- | --------------------- |
| X-DEVOPS-ACCESS-TOKEN | String | 是   | OpenAPI认证token      |
| Authorization         | String | 是   | 制品库basic认证请求头 |

#### 路径参数

| 字段      | 类型   | 必填 | 描述                                                         |
| --------- | ------ | ---- | ------------------------------------------------------------ |
| projectId | String | 是   | 项目id                                                       |
| repoName  | String | 是   | 仓库名称                                                     |
| fullPath  | String | 是   | 文件或目录完整路径，如果为目录，则会一并恢复目录内所有被删除的文件或子目录 |

#### 查询参数

| 字段             | 类型   | 必填 | 描述                                        |
| ---------------- | ------ | ---- | ------------------------------------------- |
| deletedId        | Long   | 是   | 删除时间（毫秒时间戳）                      |
| conflictStrategy | String | 否   | 冲突处理策略: `FAILED`, `OVERWRITE`, `SKIP` |

#### 请求示例

```http
POST {{devops-domain}}/api/open/CPack/repo-repository/api/node/restore/myproject/generic-local/folder1/licenses-3.20.json?deletedId=1704770789362
```



### 返回结果

| 字段      | 说明     |
|---------|--------|
| code    | 返回码    |
| message | 错误信息   |
| data    | 数据     |
| traceId | 链路追踪id |

#### 响应体示例

```json
{
  "code": 0,
  "message": null,
  "data": {
    "fullPath": "/licenses-3.20.json",
    "restoreCount": 1,
    "skipCount": 0,
    "conflictCount": 0
  },
  "traceId": ""
}
```

#### data 字段说明

节点恢复结果

| 字段            | 描述                           |
|---------------|------------------------------|
| fullPath      | 节点完整路径                       |
| restoreCount  | 实际恢复的节点数量，包含了`conflictCount` |
| skipCount     | 发生冲突并跳过的节点数量                 |
| conflictCount | 发生冲突并覆盖的节点数量                 |

