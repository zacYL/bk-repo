# 修改仓库设置

功能描述：修改仓库设置



## 请求

#### 接口方法

`POST`

#### 接口地址

`/api/open/CPack/repo-repository/api/repo/update/{projectId}/{repoName}`

#### 请求头

| 字段                  | 类型   | 必填 | 描述               |
| --------------------- | ------ | ---- | ------------------ |
| X-DEVOPS-ACCESS-TOKEN | String | 是   | Devops用户访问令牌 |

#### 路径参数

| 字段        | 类型     | 必填  | 描述   |
|-----------|--------|-----|------|
| projectId | String | 是   | 所属项目 |
| repoName  | String | 是   | 仓库名称 |

#### 查询参数

无

#### 请求体

| 字段          | 类型    | 必填 | 描述         |
| ------------- | ------- | ---- | ------------ |
| public        | Boolean | 否   | 是否公开仓库 |
| description   | String  | 否   | 简要描述     |
| configuration | Object  | 否   | 仓库配置信息 |

##### configuration示例

本地仓库

```json
    "configuration": {
        "type": "local",
        "settings": {
            "system": false
        }
    }
```

远程仓库

```json
    "configuration": {
        "type": "remote",
        "url": "<代理源地址>",
        "credentials": {
            "username": null,
            "password": null
        },
        "network": {
            "proxy": null,
            "connectTimeout": 10000,
            "readTimeout": 60000
        },
        "settings": {
            "system": false
        }
    }
```

虚拟仓库

```json
    "configuration": {
        "type": "virtual",
        "repositoryList": [
            {
                "projectId": "p1",
                "name": "pypi-local",
                "category": "LOCAL"
            },
            {
                "projectId": "p1",
                "name": "pypi-remote",
                "category": "REMOTE"
            },
            {
                "projectId": "p1",
                "name": "pypi-local2",
                "category": "LOCAL"
            }
        ],
        "settings": {
            "system": false
        }
    }
```

##### configuration字段说明

| 字段           | 类型   | 必填           | 描述                           |
| -------------- | ------ | -------------- | ------------------------------ |
| type           | String | 是             | 仓库配置类型                   |
| settings       | Object | 是             | 仓库设置                       |
| credentials    | Object | 否             | 远程仓库代理源认证配置         |
| network        | Object | 否             | 远程仓库网络代理、网络超时配置 |
| repositoryList | Object | 是（虚拟仓库） | 虚拟仓库聚合列表               |

##### settings字段说明

| 字段         | 类型    | 必填 | 描述                 |
| ------------ | ------- | ---- | -------------------- |
| system       | Boolean | 是   | 是否为系统内公开仓库 |
| interceptors | Object  | 否   | 仓库拦截器设置       |

#### 请求示例

```bash
curl -X POST -H 'X-DEVOPS-ACCESS-TOKEN: <your_access_token>' 'https://devops.example.com/api/open/CPack/repo-repository/api/repo/update/{projectId}/{repoName}' -H 'Content-Type: application/json' -d '{
    "configuration": {
        "type": "remote",
        "url": "https://registry.npmmirror.com",
        "credentials": {
            "username": null,
            "password": null
        },
        "network": {
            "proxy": null,
            "connectTimeout": 10000,
            "readTimeout": 60000
        },
        "cache": {
            "enabled": true,
            "expiration": 120
        },
        "settings": {
            "system": false
        }
    }
}'
```



## 响应

#### 响应体示例

```json
{
  "code": 0,
  "message": null,
  "data": null,
  "traceId": null
}
```

#### 响应体

| 字段    | 说明         |
| ------- | ------------ |
| code    | 返回码       |
| message | 错误信息     |
| data    | 数据, 为null |
| traceId | 链路追踪id   |

