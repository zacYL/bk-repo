# 分页查询包版本

功能描述：分页查询制品包版本



## 请求

#### 接口方法

`GET`

#### 接口地址

`/api/open/CPack/repo-repository/api/version/page/{projectId}/{repoName}`

#### 请求头

| 字段                  | 类型   | 必填 | 描述               |
| --------------------- | ------ | ---- | ------------------ |
| X-DEVOPS-ACCESS-TOKEN | String | 是   | Devops用户访问令牌 |

#### 路径参数

| 字段      | 类型   | 必填 | 描述     |
| --------- | ------ | ---- | -------- |
| projectId | String | 是   | 项目ID   |
| repoName  | String | 是   | 仓库名称 |

#### 查询参数

| 字段       | 类型   | 必填 | 描述                       |
| ---------- | ------ | ---- | -------------------------- |
| packageKey | String | 是   | 包唯一key                  |
| pageNumber | Int    | 否   | 当前页（默认值：1）        |
| pageSize   | Int    | 否   | 分页大小（默认值：20）     |
| version    | String | 否   | 版本号                     |
| stageTag   | String | 否   | 晋级tag，多个tag以逗号分隔 |

#### 请求体

无

#### 请求示例

```bash
curl -H 'X-DEVOPS-ACCESS-TOKEN: <your_access_token>' 'https://devops.example.com/api/open/CPack/repo-repository/api/version/page/{projectId}/{repoName}?pageNumber=1&pageSize=20&version=3&packageKey=npm://express'
```



## 响应

#### 响应示例

```json
{
  "code": 0,
  "message": null,
  "data": {
    "pageNumber": 1,
    "pageSize": 20,
    "totalRecords": 2,
    "totalPages": 1,
    "records": [
      {
        "createdBy": "admin",
        "createdDate": "2023-06-13T17:56:56.445",
        "lastModifiedBy": "admin",
        "lastModifiedDate": "2023-06-13T17:56:56.445",
        "recentlyUseDate": "2023-06-13T17:57:29.263",
        "name": "0.0.5",
        "size": 306747642,
        "downloads": 1,
        "stageTag": [],
        "metadata": {
          "scanStatus": "UN_QUALITY"
        },
        "packageMetadata": [
          {
            "key": "scanStatus",
            "value": "UN_QUALITY",
            "system": true,
            "description": null
          }
        ],
        "tags": [],
        "extension": {},
        "contentPath": null,
        "manifestPath": "/bkrepo-dependency-check/0.0.5/manifest.json",
        "ordinal": 59999
      },
      {
        "createdBy": "admin",
        "createdDate": "2023-05-22T11:20:09.214",
        "lastModifiedBy": "admin",
        "lastModifiedDate": "2023-05-22T11:20:09.214",
        "recentlyUseDate": "2023-06-28T14:59:28.438",
        "name": "0.0.7",
        "size": 306792628,
        "downloads": 2,
        "stageTag": [],
        "metadata": {},
        "packageMetadata": [],
        "tags": [],
        "extension": {},
        "contentPath": null,
        "manifestPath": "/bkrepo-dependency-check/0.0.7/manifest.json",
        "ordinal": 79999
      }
    ],
    "count": 2,
    "page": 1
  },
  "traceId": ""
}
```

#### 响应体

| 字段      | 说明     |
|---------|--------|
| code    | 返回码    |
| message | 错误信息   |
| data    | 数据     |
| traceId | 链路追踪id |

##### data 字段说明

分页信息

| 字段           | 说明                     |
|--------------|------------------------|
| pageNumber   | 页码(从1页开始)              |
| pageSize     | 每页多少条                  |
| totalRecords | 总记录条数                  |
| totalPages   | 总页数                    |
| records      | **数据列表**               |
| count        | 已废弃, 由`totalRecords`代替 |
| page         | 已废弃, 由`pageNumber`代替   |

##### records 字段说明

包信息

| 字段               | 说明         |
|------------------|------------|
| createdBy        | 创建者        |
| createdDate      | 创建时间       |
| lastModifiedBy   | 修改者        |
| lastModifiedDate | 修改时间       |
| recentlyUseDate  | 最近使用时间时间   |
| name             | 包版本        |
| size             | 包大小        |
| downloads        | 下载次数       |
| stageTag         | 制品晋级阶段     |
| metadata         | 元数据        |
| packageMetadata  | 包元数据(推荐使用) |  
| tags             | 标签         |
| extension        | 扩展字段       |   
| contentPath      | 包内容文件路径    |
| manifestPath     | 清单文件路径     |
| ordinal          | 包版本序列号     |
