# 创建仓库

功能描述：创建仓库



## 请求

#### 接口方法

`POST`

#### 接口地址

`/api/open/CPack/repo-repository/api/repo/create`

#### 请求头

| 字段                  | 类型   | 必填 | 描述               |
| --------------------- | ------ | ---- | ------------------ |
| X-DEVOPS-ACCESS-TOKEN | String | 是   | Devops用户访问令牌 |

#### 路径参数

无

#### 查询参数

无

#### 请求体

| 字段          | 类型    | 必填 | 描述                      |
| ------------- | ------- | ---- | ------------------------- |
| projectId     | String  | 是   | 所属项目id                |
| name          | String  | 是   | 仓库名称                  |
| type          | String  | 是   | 仓库类型                  |
| category      | String  | 是   | 仓库类别                  |
| public        | Boolean | 否   | 是否公开（默认值：false） |
| description   | String  | 否   | 简要描述                  |
| configuration | Object  | 是   | 仓库配置                  |

##### configuration示例

本地仓库

```json
...
    "configuration": {
        "type": "local",
        "settings": {
            "system": false
        }
    }
...
```

远程仓库

```json
...
    "configuration": {
        "type": "remote",
        "url": "<代理源地址>",
        "credentials": {
            "username": null,
            "password": null
        },
        "network": {
            "proxy": null,
            "connectTimeout": 10000,
            "readTimeout": 60000
        },
        "settings": {
            "system": false
        }
    }
...
```

虚拟仓库

```json
...
    "configuration": {
        "type": "virtual",
        "repositoryList": [
            {
                "projectId": "p1",
                "name": "pypi-local",
                "category": "LOCAL"
            },
            {
                "projectId": "p1",
                "name": "pypi-remote",
                "category": "REMOTE"
            },
            {
                "projectId": "p1",
                "name": "pypi-local2",
                "category": "LOCAL"
            }
        ],
        "settings": {
            "system": false
        }
    }
...
```

##### configuration字段说明

| 字段           | 类型   | 必填           | 描述                           |
| -------------- | ------ | -------------- | ------------------------------ |
| type           | String | 是             | 仓库配置类型                   |
| settings       | Object | 是             | 仓库设置                       |
| credentials    | Object | 否             | 远程仓库代理源认证配置         |
| network        | Object | 否             | 远程仓库网络代理、网络超时配置 |
| repositoryList | Object | 是（虚拟仓库） | 虚拟仓库聚合列表               |

##### settings字段说明

| 字段   | 类型   | 必填 | 描述                 |
| ------ | ------ | ---- | -------------------- |
| system | String | 是   | 是否为系统内公开仓库 |

#### 请求示例

```bash
curl -X 'POST' -H 'Content-Type: application/json' -H 'X-DEVOPS-ACCESS-TOKEN: <your_access_token>' 'https://devops.example.com/api/open/CPack/repo-repository/api/repo/create' -d '{
    "projectId": "p1",
    "type": "NPM",
    "name": "npm-local",
    "public": false,
    "description": "",
    "category": "LOCAL",
    "configuration": {
        "type": "local",
        "settings": {
            "system": false
        }
    }
}'
```



## 响应

#### 响应示例

```json
{
  "code": 0,
  "message": null,
  "data": null,
  "traceId": null
}
```

#### 响应体

| 字段      | 说明        |
|---------|-----------|
| code    | 返回码       |
| message | 错误信息      |
| data    | 数据, 为null |
| traceId | 链路追踪id    |

