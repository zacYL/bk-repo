# 分页查询仓库列表

功能描述：分页查询指定项目下有访问权限的仓库列表



## 请求

#### 接口方法

`GET`

#### 接口地址

`/api/open/CPack/repo-repository/api/repo/page/{projectId}/{pageNumber}/{pageSize}`

#### 请求头

| 字段                  | 类型   | 必填 | 描述               |
| --------------------- | ------ | ---- | ------------------ |
| X-DEVOPS-ACCESS-TOKEN | String | 是   | Devops用户访问令牌 |

#### 路径参数

| 字段       | 类型   | 必填 | 描述     |
| ---------- | ------ | ---- | -------- |
| projectId  | String | 是   | 项目ID   |
| pageNumber | Int    | 是   | 当前页码 |
| pageSize   | Int    | 是   | 页大小   |

#### 查询参数

| 字段     | 类型   | 必填 | 描述                                                   |
| -------- | ------ | ---- | ------------------------------------------------------ |
| name     | String | 否   | 仓库名称(模糊匹配, 忽略大小写)                         |
| type     | String | 否   | 制品类型（大写）（可用值：MAVEN, NPM, DOCKER, ......） |
| category | List   | 否   | 仓库类别（可用值：LOCAL, REMOTE, VIRTUAL, COMPOSITE）  |

#### 请求体

无

#### 请求示例

```bash
curl -H 'X-DEVOPS-ACCESS-TOKEN: <your_access_token>' 'https://devops.example.com/api/open/CPack/repo-repository/api/repo/page/s9acf0/1/20'
```



## 响应

#### 响应体示例

```json
{
    "code": 0,
    "message": null,
    "data": {
        "pageNumber": 1,
        "pageSize": 20,
        "totalRecords": 2,
        "totalPages": 1,
        "records": [
            {
                "projectId": "s9acf0",
                "name": "bkdevops",
                "type": "DOCKER",
                "category": "LOCAL",
                "public": true,
                "description": "",
                "configuration": {
                    "type": "local",
                    "webHook": {
                        "webHookList": []
                    },
                    "cleanStrategy": null,
                    "settings": {
                        "system": false
                    }
                },
                "storageCredentialsKey": null,
                "createdBy": "admin",
                "createdDate": "2024-04-17T11:19:24.712",
                "lastModifiedBy": "admin",
                "lastModifiedDate": "2024-04-17T11:19:24.712",
                "hasPermission": true,
                "permission": null,
                "artifacts": null,
                "quota": null,
                "used": 0,
                "coverStrategy": null
            },
            {
                "projectId": "s9acf0",
                "name": "docker-big",
                "type": "DOCKER",
                "category": "LOCAL",
                "public": false,
                "description": "",
                "configuration": {
                    "type": "local",
                    "webHook": {
                        "webHookList": []
                    },
                    "cleanStrategy": null,
                    "settings": {
                        "system": false,
                        "tenant": false
                    }
                },
                "storageCredentialsKey": null,
                "createdBy": "ericwu",
                "createdDate": "2024-02-07T14:48:07.084",
                "lastModifiedBy": "ericwu",
                "lastModifiedDate": "2024-02-07T14:48:07.084",
                "hasPermission": true,
                "permission": null,
                "artifacts": null,
                "quota": null,
                "used": 0,
                "coverStrategy": null
            }
        ],
        "count": 2,
        "page": 1
    },
    "traceId": ""
}
```
#### 响应体

| 字段    | 说明       |
| ------- | ---------- |
| code    | 返回码     |
| message | 错误信息   |
| data    | 数据       |
| traceId | 链路追踪id |

##### 分页信息

| 字段         | 说明                                                   |
| ------------ | ------------------------------------------------------ |
| pageNumber   | 当前页码                                               |
| pageSize     | 每页大小                                               |
| totalRecords | 总记录条数                                             |
| totalPages   | 总页数                                                 |
| records      | **数据列表**                                           |
| count        | 总记录条数（该字段将在未来移除，请使用`totalRecords`） |
| page         | 总页数（该字段将在未来移除，请使用`totalPages`）       |

##### records 字段说明

| 字段                  | 说明                                             |
| --------------------- | ------------------------------------------------ |
| projectId             | 所属项目id                                       |
| name                  | 仓库名称                                         |
| type                  | 仓库类型                                         |
| category              | 仓库类别                                         |
| public                | 是否公开                                         |
| description           | 简要描述                                         |
| configuration         | 仓库配置信息（不同类别的仓库配置信息的结构不同） |
| storageCredentialsKey | 存储凭证key                                      |
| createdBy             | 创建者                                           |
| createdDate           | 创建日期                                         |
| lastModifiedBy        | 上次修改者                                       |
| lastModifiedDate      | 上次修改日期                                     |
| hasPermission         | （未来将会移除该字段，请勿使用）                 |
| permission            | （未来将会移除该字段，请勿使用）                 |
| artifacts             | （未来将会移除该字段，请勿使用）                 |
| quota                 | 仓库配额                                         |
| used                  | 仓库已使用容量（预留字段）                       |
| coverStrategy         | 覆盖策略                                         |
